<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ClynicoApp</title>
  <style>body{font-family:system-ui,Arial;margin:2rem;max-width:720px}</style>
</head>
<body>
  <h1>Hola ðŸ‘‹ ClynicoApp</h1>
  <p id="status">Cargandoâ€¦</p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { initializeAppCheck, ReCaptchaEnterpriseProvider } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app-check.js";

    const firebaseConfig = {
      apiKey: "TU_API_KEY",
      authDomain: "TU_PROYECTO.firebaseapp.com",
      projectId: "TU_PROYECTO",
      storageBucket: "TU_PROYECTO.appspot.com",
      messagingSenderId: "XXXXXXXXXXXX",
      appId: "1:XXXXXXXXXXXX:web:YYYYYYYYYYYYYY"
    };
    const app = initializeApp(firebaseConfig);

    // App Check (Enterprise). En local puedes usar debug token (comentado)
    // self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;
    initializeAppCheck(app, {
      provider: new ReCaptchaEnterpriseProvider("TU_RECAPTCHA_ENTERPRISE_SITE_KEY"),
      isTokenAutoRefreshEnabled: true
    });

    // Demo de Auth + Firestore
    await signInAnonymously(getAuth(app));
    const db = getFirestore(app);
    const ref = doc(db, "demos", "hello");
    await setDoc(ref, { ok:true, ts: Date.now() });
    const snap = await getDoc(ref);
    document.getElementById("status").textContent = "Listo: " + JSON.stringify(snap.data());
  </script>
</body>
</html>

